@{
    ViewBag.Title = "DisplayList";
    Layout = "~/Views/_LayoutPage.cshtml";
}
@using Graduate_Council.Model
<link href="../../Res/Index/css/page.css" rel="stylesheet" type="text/css" />
<div class="base"> 
   <div class="container"> 
    <div class="content"> 
    <div class="row">
    <div class="main-top-img">
     @if (ViewData["banner"] == null)
     {
        <img src="/images/banner/banner2.png" alt="banner1.png" style="width:100%;height:200px;"/>
     }
     else
     {
         <img src="@ViewData["banner"]" alt="banner1.png" style="width:100%;height:200px;"/>
     }
      </div>
      </div>

     <div class="row"> 
     
     <div class="left-nav">
      <div class="title">
      <font>@NewsCategory.totalCategory[ViewData["Name"].ToString()]</font>
        <span class="tran-left"></span><span class="tran-right"></span>
      </div>
      <ul>
      @{int i = 1;}
      @foreach (string str in NewsCategory.newsCategory[ViewData["Name"].ToString()])
      {          
        <li><a href="/Home/DisplayList?Name=@ViewData["Name"]&&Cat=@i">@str</a></li>
          i++;
      }        
      </ul>
     </div>
      <div class="main-page"> 
     @if (ViewData["list"] != null)
     {
        <table class="news-list" >
        <thead>
          <tr>
            <th style="text-align:left;text-indent:1em;">标题</th>
            <th>时间</th>
            <th>阅读次数</th>
          </tr>
        </thead>
        <tbody>
        @foreach (NewInfo newInfo in (List<NewInfo>)ViewData["list"])
        {
          <tr>
            <th><a href="/Home/DisplayNews?Id=@newInfo.Id&&Name=@ViewData["Name"]">@newInfo.Title</a></th>
            <td>@newInfo.SubDateTime.ToShortDateString()</td>
            <td>@newInfo.PageView</td>
          </tr>
        }          
        </tbody>
        </table>
     }
     else
     {
         <p>暂时没有新闻 </p>
     }
     @if (ViewData["Cat"] == null)
     {
     <div class="pagin">
            <div class="message">           
                共<i class="blue">@ViewData["pageCount"]</i>页，当前显示第&nbsp;<i class="blue">@ViewData["pageIndex"]&nbsp;</i>页</div>
            <ul class="paginList">
                <li class="paginItem"><a href="?PageIndex=@ViewData["pagePre"]&&Name=@ViewData["Name"]">
                    <span class="pagepre"></span></a></li>
                @for (int j = 1; j <= (int)ViewData["pageCount"]; j++)
                {
                    if (j == (int)ViewData["pageIndex"])
                    {            
                    <li class="paginItem current"><a href="javascript:void(0)">@j</a></li>
                    }
                    else
                    {
                    <li class="paginItem"><a href="?PageIndex=@j&&Name=@ViewData["Name"]">@j</a></li> 
                    }
                }
                <li class="paginItem"><a href="?PageIndex=@ViewData["pageNext"]&&Name=@ViewData["Name"]">
                    <span class="pagenxt"></span></a></li>
            </ul>
        </div>
     }
     else
     {
          <div class="pagin">
            <div class="message">           
                共<i class="blue">@ViewData["pageCount"]</i>页，当前显示第&nbsp;<i class="blue">@ViewData["pageIndex"]&nbsp;</i>页</div>
            <ul class="paginList">
                <li class="paginItem"><a href="?PageIndex=@ViewData["pagePre"]&&Name=@ViewData["Name"]&&Cat=@ViewData["Cat"]">
                    <span class="pagepre"></span></a></li>
                @for (int j = 1; j <= (int)ViewData["pageCount"]; j++)
                {
                    if (j == (int)ViewData["pageIndex"])
                    {            
                    <li class="paginItem current"><a href="javascript:void(0)">@j</a></li>
                    }
                    else
                    {
                    <li class="paginItem"><a href="?PageIndex=@j&&Name=@ViewData["Name"]&&Cat=@ViewData["Cat"]">@j</a></li> 
                    }
                }
                <li class="paginItem"><a href="?PageIndex=@ViewData["pageNext"]&&Name=@ViewData["Name"]&&Cat=@ViewData["Cat"]">
                    <span class="pagenxt"></span></a></li>
            </ul>
        </div>
     }
       </div>
     </div> 
    </div> 
   </div> 
  </div>